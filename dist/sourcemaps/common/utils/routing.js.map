{"version":3,"sources":["common/utils/routing.js"],"names":["routing","module","requires","push","RouterConfig","$stateProvider","$futureStateProvider","stateFactory","$q","$ocLazyLoad","futureState","def","defer","System","import","src","then","newModule","loaded","name","key","Object","keys","load","resolve","console","log","promise","forEach","r"],"mappings":"AAAA;;AAEA,OAAO,eAAe,SAAS,cAAc;EAC3C,OAAO;;;AAHT,QAAA;;AACA,IAAA,UAAA,QAAA;;AASA,IAAI,WAAW,uBAAuB;;AAEtC,SAAS,uBAAuB,KAAK,EAAE,OAAO,OAAO,IAAI,aAAa,MAAM,EAAE,SAAS;;AATvF,IAAIA,UAAU,SAAVA,QAAmBC,QAAQ;;EAE7BA,OAAOC,SAASC,KAAK;;EAErB,IAAIC,eAAe,CAAC,kBAAkB,wBAAwB,UAAUC,gBAAgBC,sBAAsB;;IAE5GA,qBAAqBC,aAAa,QAAQ,CAAC,MAAM,eAAe,eAAe,UAASC,IAAIC,aAAaC,aAAa;MACpH,IAAIC,MAAMH,GAAGI;;MAEbC,OAAOC,OAAOJ,YAAYK,KAAKC,KAAK,UAAA,QAAU;QAC5C,IAAIC,YAAYC;QAChB,IAAI,CAACA,OAAOC,MAAM;UAChB,IAAIC,MAAMC,OAAOC,KAAKJ;UACtBD,YAAYC,OAAOE,IAAI;;;QAGzBX,YAAYc,KAAKN,WAAWD,KAAK,YAAW;UAC1CL,IAAIa;WACH,YAAW;UACZC,QAAQC,IAAI,oBAAoBR,OAAOC;;;;MAI3C,OAAOR,IAAIgB;;;IAGb,SAAA,QAAaC,QAAQ,UAASC,GAAG;MAC/BvB,qBAAqBI,YAAYmB;;;;EAKrC,OAAOzB;;;AAaT,QAAQ,UAVOJ,QAUW","file":"../../../common/utils/routing.js","sourcesContent":["import 'ui-router-extras';\nimport futureRoutes from 'app/routes.json!';\n\nvar routing = function(module) {\n\n  module.requires.push('ct.ui.router.extras.future');\n\n  var RouterConfig = ['$stateProvider', '$futureStateProvider', function ($stateProvider, $futureStateProvider) {\n\n    $futureStateProvider.stateFactory('load', ['$q', '$ocLazyLoad', 'futureState', function($q, $ocLazyLoad, futureState) {\n      var def = $q.defer();\n\n      System.import(futureState.src).then(loaded => {\n        var newModule = loaded;\n        if (!loaded.name) {\n          var key = Object.keys(loaded);\n          newModule = loaded[key[1]];\n        }\n\n        $ocLazyLoad.load(newModule).then(function() {\n          def.resolve();\n        }, function() {\n          console.log('error loading: ' + loaded.name);\n        });\n      });\n\n      return def.promise;\n    }]);\n\n    futureRoutes.forEach(function(r) {\n      $futureStateProvider.futureState(r);\n    });\n\n  }];\n\n  return RouterConfig;\n};\n\nexport default routing;\n"],"sourceRoot":"/src"}